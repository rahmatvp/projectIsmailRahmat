<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biodata Pemain</title>
    <link rel="stylesheet" href="./bootstrap.min.css">
</head>

<body>

    <div class="container-fluid d-flex justify-content-center">
        <div class="d-flex flex-column">
            <div class="card bg-dark text-white rounded-0">
                <img src="https://www.goal.com/assets/default/ltr/img/player-information-bg.7c743dacb1.jpg"
                    class="card-img" style="height: 15rem;">
                <div class="card-img-overlay d-flex flex-column">
                    <div class="d-flex mb-3">
                        <div class="rounded-circle overflow-hidden border me-3" style="min-width: 50px;">
                            <img src="https://secure.cache.images.core.optasports.com/soccer/players/50x50/uuid_2r4ox2h5r7doo3ys9ynm2nbo5.png"
                                alt="">
                        </div>
                        <h2 class="card-title align-self-center text-truncate">
                            <span class="fw-bold">Adrian</span>
                            <span>Manalagi</span>
                        </h2>
                        <div class="flex-shrink-1 ms-auto d-flex flex-row">
                            <div class="rounded-circle overflow-hidden border d-flex justify-content-center align-items-center bg-light"
                                style=" margin-right: -15px; z-index: 2; width: 40px; height: 40px;">
                                <img loading="lazy" alt="Liverpool FC" class="p0c-competition-tables__crest"
                                    src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3C/svg%3E"
                                    srcset="https://secure.cache.images.core.optasports.com/soccer/teams/30x30/uuid_c8h9bw1l82s06h77xxrelzhur.png, https://secure.cache.images.core.optasports.com/soccer/teams/75x75/uuid_c8h9bw1l82s06h77xxrelzhur.png 2x"
                                    height="30">
                            </div>
                            <div class="rounded-circle overflow-hidden border" style="width: 40px; height: 40px;"">
                                <img loading=" lazy" class="flag" alt="Spanyol"
                                src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 36'%3E%3C/svg%3E"
                                srcset="https://upload.wikimedia.org/wikipedia/commons/4/41/Flag_of_Austria.svg"
                                height="40">
                            </div>
                        </div>
                    </div>
                    <p class="card-text" style="z-index: 9;"><span class="fw-bold">Kiper:</span> Liverpool FC
                        /
                        Spanyol</p>
                    <p class="card-text" style="z-index: 9;"><span class="fw-bold">TTL:</span> Jan 03, 1987
                        (Sevilla, Spanyol)</p>
                    <div class="d-flex" style="z-index: 9;">
                        <div class="d-flex flex-column me-5">
                            <p class="mb-0 fw-bold">Tinggi:</p>
                            <p>150cm</p>
                        </div>
                        <div class="d-flex flex-column me-5">
                            <p class="mb-0 fw-bold">Berat:</p>
                            <p>80kg</p>
                        </div>
                        <div class="d-flex flex-column me-5">
                            <p class="mb-0 fw-bold">Kaki:</p>
                            <p>kanan</p>
                        </div>
                    </div>
                    <div class="ms-auto position-relative" style="z-index: 1;">
                        <p class="position-absolute m-0 fw-bold"
                            style="font-size: 15rem; letter-spacing: -1rem; bottom: -6.3rem; right: 0; color: rgba(107, 176, 255, 0.5);">
                            13
                        </p>
                    </div>
                </div>
            </div>
            <div class="card rounded-0" style="border: none; background-color: #091720;">
                <div class="card-body">
                    <a href="#" class="me-2 btn btn-primary fw-bold">PROFIL</a>
                    <a href="#" id="tombol-fetch" class="me-2 btn btn-outline-light">KARIR</a>
                    <a href="#" class="me-2 btn btn-outline-light">PERTANDINGAN</a>
                    <a href="#" class="me-2 btn btn-outline-light">BERITA</a>
                </div>
            </div>
            <div id="hasil-matches" class="my-3 p-3 bg-white rounded shadow-sm">
                <h6 class="border-bottom pb-2 mb-0">Hasil Pertandingan</h6>
                <div id="spinner" class="d-flex justify-content-center d-none">
                    <div class="spinner-border my-3" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>

<template id="template-kartu-match">
    <div class="d-flex text-muted pt-3">
        <svg class="bd-placeholder-img flex-shrink-0 me-2 rounded" width="32" height="32"
            xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 32x32"
            preserveAspectRatio="xMidYMid slice" focusable="false">
            <title>Placeholder</title>
            <rect width="100%" height="100%" fill="#007bff"></rect><text x="50%" y="50%" fill="#007bff"
                dy=".3em">32x32</text>
        </svg>

        <p class="pb-3 mb-0 small lh-sm border-bottom">
            <strong class="d-block text-gray-dark">competition name</strong>
            <span>home team vs away team</span>
        </p>
    </div>
</template>

<script>
    const spinner = document.getElementById('spinner');
    const hasilMatches = document.getElementById('hasil-matches');
    const tombolFetch = document.getElementById('tombol-fetch');
    const templateKartuMatch = document.getElementById("template-kartu-match");

    let dataMatches;

    tombolFetch.addEventListener("click", function () {
        this.classList.replace("btn-outline-light", "btn-primary")
        this.parentElement.querySelector(".btn-primary").classList.replace("btn-primary", "btn-outline-light")

        !dataMatches && getMatches('http://api.football-data.org/v2/players/44/matches')

    })

    function getMatches(url) {
        spinner.classList.remove("d-none")
        fetch(url, {
            method: "get"
            , mode: 'cors'
            , headers: {
                'X-Auth-Token': '8a2c0fd0dc284e7a9da42ecb728cb7e0'
            }
        }).then(res => {
            return res.json()
        }).then(d => {
            spinner.classList.add("d-none")
            dataMatches = d.matches


            dataMatches.forEach(el => {
                let tmp = templateKartuMatch.content.firstElementChild.cloneNode(true);
                let pTag = tmp.lastElementChild;
                pTag.firstElementChild.innerHTML = el.competition.name
                pTag.lastElementChild.innerHTML = `${el.homeTeam.name} VS ${el.awayTeam.name}`
                hasilMatches.appendChild(tmp)
            });


            console.log(d)
        })
    };
</script>

</html>